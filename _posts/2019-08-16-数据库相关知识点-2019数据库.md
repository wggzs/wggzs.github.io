---
layout:     post                    # 使用的布局（不需要改）
title:      数据库相关知识点总结               # 标题 
subtitle:   Database, So easy #副标题
date:       2019-08-16              # 时间
author:     GG                      # 作者
header-img: img/post-bg-2015.jpg    #这篇文章标题背景图片
catalog: true                       # 是否归档
tags:                               #标签
    - 生活
---

## 数据库面试侧重点

**如何实现一个关系型数据库？**
*关系型数据库就是依据关系模型创建的数据库，关系模型有一对一，一对多，多对多。*
* 数据存储
* 程序实例
   * 存储管理，数据存储的管理
   * 缓存机制，对于运行过得sql语句的结果进行缓存
   * SQL解析，对sql语句的分析
   * 日志管理，对发生过的sql操作记录日志
   * 权限管理，设置用户的权限
   * 容灾管理，对数据库的备份
   * 索引管理，对sql语句的优化
   * 锁管理，处理高并发的情况

**索引中所使用到的数据结构**
</br>1.二叉查找树 2.B树 3.B+树 4.Hash索引 5.BitMap索引

**为何运用B+树更适合做索引？**
- B+树的磁盘读写代价低，数据只存在于各个叶子结点中，其他父结点都作为索引
- B+树查询效率更稳定
- B+树更利于对数据库的扫描

**hash索引缺点：**
1. 仅仅能满足“=”，“IN”，不能范围查询
2. 无法被用来避免数据的排序操作
3. 不能利用部分索引键查询
4. 不能避免表扫描
5. 若有大量Hash值相等的情况下性能不一定高于b树

**密集索引和稀疏索引的区别：**
	密集索引文件中的每个搜索码值都对应一个索引值</br>
	稀疏索引文件只为索引码的某些值建立索引项 
  
**索引问题回顾与总结：**
1. 为什么使用索引？
		避免全表扫描查询数据，提高查询的效率
2. 什么样的信息能成为索引？
		一般是主键、唯一键等只要是让数据能有区分性的字段都可以作为索引
3. 索引的数据结构？
		有二叉查找树，b树，b+树，hash索引，bitMap索引
4. 密集索引和稀疏索引的区别？
		密集索引中每一个搜索码值对应一个索引值</br>
		稀疏索引中只为搜索码的某些值建立索引项 

**慢sql的调优：**
* 根据日志查找慢sql语句
*	使用explain关键字对sql进行分析(主要看type与extra)
*	修改sql或者尽量让sql走索引。

**索引是建立的越多越好吗？**
1. 数据量小的表不需要建立索引，建立会增加额外的所以开销
2. 数据变更需要维护索引，因此更多的索引意味着更多的维护成本
3. 更多的索引意味着更多的空间

### 锁模块：

**MyISAM与InnoDB关于锁方面的区别是什么？**
	MyISAM默认的是表级锁，InnoDB默认的是行级锁，也支持表级锁</br>
	
* MyISAM适用的场景：
   * 频繁执行全表count语句；
   * 对数据进行增删改的频率不高，查询非常频繁；
   * 没有事务。
* InnoDB适用场景：
   * 数据增删改查相当频繁
   * 可靠性要求比较高，要求支持事务

**数据库锁的分类：**
1. 按锁的粒度划分，表级锁，行级锁，页级锁
2. 按锁级别划分，共享锁，排它锁
3. 按加锁方式划分，自动锁，显示锁
4. 按操作划分，DML锁，DDL锁
5. 按使用方式划分，乐观锁，悲观锁
								
**数据库的四大特性？ACID**
	* 原子性(Atomic)
	* 一致性(COnsistency)
	* 隔离性(Isolation)
	* 持久性(Durability)
	
**事务隔离级别以及各级别下的并发访问问题**
* 更新丢失：事务A对数据进行操作时，事务B也在对同一数据更新操作并完成了提交，然后事务A遇到异常进行回滚导致事务B的更新丢失。
* 脏读：读取了一个事务还未提交的数据。将隔离级别设置为READ_COMMITED即可避免
* 不可重复读：事务a多次读取数据，期间事务b对数据进行操作使a多次读取的数据不一样。
							将隔离级别设置为repeatable read
* 幻读：	将隔离级别设置为serializable
	
一些关键语法：
	group by 分组
	having 过滤组



















